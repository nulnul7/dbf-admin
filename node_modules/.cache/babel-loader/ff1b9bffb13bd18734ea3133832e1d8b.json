{"ast":null,"code":"var _jsxFileName = \"/Users/erteka/Desktop/react/dbfPortf/dbf-admin/src/components/portfolio_crud/AddPortfolio.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport Sidebar from \"../sidebar/Sidebar\";\nimport \"./portfolio.css\";\nimport Axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport loadingPict from \"../../assets/LoadingBunny.gif\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddPortfolio = () => {\n  _s();\n  const [photos, setPhotos] = useState(\"\");\n  // const [category, setCategory] = useState(\"\");\n  const [portf, setPortf] = useState({});\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    setPortf(prev => ({\n      ...prev,\n      [e.target.id]: e.target.value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    //loading info\n    const options = {\n      onUploadProgress: progressEvent => {\n        const {\n          loaded,\n          total\n        } = progressEvent;\n        let precentage = Math.floor(loaded * 100 / total);\n        console.log('options', precentage);\n        precentage !== 100 ? setLoading(true) : setLoading(false);\n      }\n    };\n    try {\n      const list = await Promise.all(Object.values(photos).map(async photo => {\n        console.log(\"ini photo, photo\");\n        const datas = new FormData();\n        datas.append(\"file\", photo); // 'file' name is default\n        datas.append(\"upload_preset\", \"portImages\"); // 'upload_preset' name is default, 'portImages' nama folder di cloudinary\n\n        const upload = await Axios.post(\"https://api.cloudinary.com/v1_1/mangga/image/upload\", datas, options);\n        const {\n          url\n        } = upload.data;\n        return url;\n      }));\n      const {\n        client,\n        description,\n        title\n      } = portf;\n      const portfolioData = {\n        client,\n        description,\n        title,\n        photos: list\n        // category,\n      };\n\n      const statusUpdate = await Axios.post(\"http://localhost:5500/5R2I/portfolio/add\", portfolioData);\n      console.log(\"status\", statusUpdate);\n      navigate(\"/getPortfolio\");\n    } catch (error) {\n      console.error('Error:', error);\n      return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"PWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"addPortHeader\",\n            children: \"Add Porfolio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"addPort\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"addPortForm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addPortInput\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"title\",\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"title\",\n                  name: \"title\",\n                  onChange: handleChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addPortInput\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"client\",\n                  children: \"Client\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"client\",\n                  name: \"client\",\n                  onChange: handleChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"addPortInput\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"photos\",\n                  children: \"Photos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  id: \"photos\",\n                  name: \"photos\",\n                  multiple: true,\n                  onChange: e => setPhotos(e.target.files),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSubmit,\n                className: \"btnSubmit\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), loading && /*#__PURE__*/_jsxDEV(\"img\", {\n                src: loadingPict,\n                alt: \"\",\n                className: \"loading\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(AddPortfolio, \"fU2jHxPCv8SSznBaayFcxBOD5sc=\", false, function () {\n  return [useNavigate];\n});\n_c = AddPortfolio;\nexport default AddPortfolio;\nvar _c;\n$RefreshReg$(_c, \"AddPortfolio\");","map":{"version":3,"names":["useState","Sidebar","Axios","useNavigate","loadingPict","AddPortfolio","photos","setPhotos","portf","setPortf","loading","setLoading","navigate","handleChange","e","prev","target","id","value","handleSubmit","preventDefault","options","onUploadProgress","progressEvent","loaded","total","precentage","Math","floor","console","log","list","Promise","all","Object","values","map","photo","datas","FormData","append","upload","post","url","data","client","description","title","portfolioData","statusUpdate","error","files"],"sources":["/Users/erteka/Desktop/react/dbfPortf/dbf-admin/src/components/portfolio_crud/AddPortfolio.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport Sidebar from \"../sidebar/Sidebar\";\nimport \"./portfolio.css\";\nimport Axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport loadingPict from \"../../assets/LoadingBunny.gif\";\n\nconst AddPortfolio = () => {\n  const [photos, setPhotos] = useState(\"\");\n  // const [category, setCategory] = useState(\"\");\n  const [portf, setPortf] = useState({});\n  const [loading, setLoading] = useState(false)\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setPortf((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    //loading info\n    const options = {\n      onUploadProgress: (progressEvent) => {\n        const { loaded, total } = progressEvent;\n\n        let precentage = Math.floor((loaded * 100) / total);\n        console.log('options', precentage);\n        precentage !== 100 ? setLoading(true) : setLoading(false)\n      },\n    };\n\n    try {\n      const list = await Promise.all(\n        Object.values(photos).map(async (photo) => {\n          console.log(\"ini photo, photo\");\n          const datas = new FormData();\n          datas.append(\"file\", photo); // 'file' name is default\n          datas.append(\"upload_preset\", \"portImages\"); // 'upload_preset' name is default, 'portImages' nama folder di cloudinary\n\n          const upload = await Axios.post(\n            \"https://api.cloudinary.com/v1_1/mangga/image/upload\",\n            datas,\n            options\n          );\n          const { url } = upload.data;\n          return url;\n        })\n      );\n\n      const { client, description, title } = portf;\n      const portfolioData = {\n        client,\n        description,\n        title,\n        photos: list,\n        // category,\n      };\n      const statusUpdate = await Axios.post(\n        \"http://localhost:5500/5R2I/portfolio/add\",\n        portfolioData\n      );\n      console.log(\"status\", statusUpdate);\n      navigate(\"/getPortfolio\");\n    } catch (error) {\n      console.error('Error:', error);\n      return null;\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"wrapper\">\n        <Sidebar />\n        <div className=\"PContainer\">\n          <div className=\"PWrapper\">\n            <div className=\"addPortHeader\">Add Porfolio</div>\n            <div className=\"addPort\">\n              <form className=\"addPortForm\">\n                <div className=\"addPortInput\">\n                  <label htmlFor=\"title\">Title</label>\n                  <input\n                    type=\"text\"\n                    id=\"title\"\n                    name=\"title\"\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n                <div className=\"addPortInput\">\n                  <label htmlFor=\"client\">Client</label>\n                  <input\n                    type=\"text\"\n                    id=\"client\"\n                    name=\"client\"\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n                {/* <div className=\"addPortInput\">\n                  <label htmlFor=\"description\">Description</label>\n                  <input\n                    type=\"text\"\n                    id=\"description\"\n                    name=\"description\"\n                    onChange={handleChange}\n                    required\n                  />\n                </div> */}\n                <div className=\"addPortInput\">\n                  <label htmlFor=\"photos\">Photos</label>\n                  <input\n                    type=\"file\"\n                    id=\"photos\"\n                    name=\"photos\"\n                    multiple\n                    onChange={(e) => setPhotos(e.target.files)}\n                    required\n                  />\n                </div>\n                {/* <div className=\"addPortSelect\">\n                  <label htmlFor=\"category\">Category</label>\n                  <select\n                    id=\"category\"\n                    name=\"category\"\n                    className=\"addPortSelect\"\n                    onChange={(e) => setCategory(e.target.value)}\n                  >\n                    <optgroup label=\"portfolio category\">\n                      <option value=\"graphicDesign\">Graphic Design</option>\n                      <option value=\"webDesign\">Web Design</option>\n                      <option value=\"photography\">Photography</option>\n                    </optgroup>\n                  </select>\n                </div> */}\n                <button onClick={handleSubmit} className=\"btnSubmit\">\n                  Submit\n                </button>\n                {\n                  loading && <img src={loadingPict} alt=\"\" className=\"loading\" />\n                }\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddPortfolio;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}